<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <title>Blind Puzzle</title>
  <!-- Załaduj style Chessboard.js -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/chessboard-1.0.0.min.css') }}">
  <style>
    #board {
      width: 400px;
    }
    .dark-moves {
      margin-top: 20px;
    }
  </style>
</head>
<body>

  <h1>Blind Puzzle</h1>

  <p>Pozycja po {{ executed_blind_moves|length }} ruchach w ciemno (startowa = #{{start_halfmove}},
     końcowa = #{{target_halfmove}})</p>

  <div id="board"></div>

  <div class="dark-moves">
    <h3>Wykonane w ciemno:</h3>
    {% if executed_blind_moves %}
      <ul>
      {% for move in executed_blind_moves %}
        <li>{{ move }}</li>
      {% endfor %}
      </ul>
    {% else %}
      <p>Brak</p>
    {% endif %}
  </div>

  <div>
    <h3>Rozwiązanie puzzle (z bazy):</h3>
    <p>{{ puzzle_solution }}</p>
    <!-- Uwaga: puzzle_solution to "e4e5 f3c3 e5e4 f2f7"... 
         Pierwszy ruch to przeciwnika, więc puzzle zaczyna się realnie dopiero od drugiego.
         Jak to obsłużyć zależy od Twojego pomysłu -->
  </div>

  <!-- Załaduj jQuery -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <!-- Załaduj Chessboard.js -->
  <script src="{{ url_for('static', filename='js/chessboard-1.0.0.min.js') }}"></script>

  <script>
    var finalFen = "{{ final_fen }}";
    var board = Chessboard('board', {
      pieceTheme: '/static/img/chesspieces/wikipedia/{piece}.png',
      position: finalFen
    });
  </script>
</body>
</html>
